(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d09e9"],{"696f":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"groupData"},[i("div",{staticClass:"container"},[i("div",{staticClass:"contentBlock",attrs:{"data-aos":"fade-right"}},[i("div",{staticClass:"contentHead"},[i("div",{staticClass:"groupName"},[i("div",{staticClass:"title d-flex justify-content-between"},[i("h2",[t._v(t._s(t.groupData.groupName))]),i("button",{attrs:{type:"button"},on:{click:t.deleAllItem}},[i("font-awesome-icon",{attrs:{icon:"fa-solid fa-trash",size:"xl"}})],1)]),i("p",{staticClass:"priceTotal"},[t._v(" 目前累積金額 $"),i("span",[t._v(t._s(t.calTotalPrice))])])]),i("div",{staticClass:"d-flex"},[i("button",{staticClass:"lgBtn",attrs:{type:"button"},on:{click:t.openEditMember}},[t._v("編輯成員")]),i("button",{staticClass:"lgBtn",attrs:{type:"button"},on:{click:t.openAddItem}},[t._v("新增項目")])])]),i("ul",{staticClass:"contentMain"},t._l(t.groupData.groupList,(function(e){return i("li",{key:e.key},[i("div",{staticClass:"userTitle d-flex align-item-center justify-content-between",on:{click:function(t){e.isHidden=!e.isHidden}}},[i("h3",[t._v(t._s(e.name))]),i("p",[t._v("目前支出："+t._s(t.perTotalPrice(e)))])]),i("ul",{staticClass:"contentList",class:{hidden:e.isHidden}},t._l(e.list,(function(n,a){return i("li",{key:a},[i("div",{staticClass:"d-flex align-item-center justify-content-between"},[i("h4",[t._v(t._s(n.content))]),i("p",{staticClass:"d-flex align-item-center"},[i("span",[t._v("$"+t._s(n.price))]),i("button",{attrs:{type:"button"},on:{click:function(e){return t.openEditItem(n)}}},[i("font-awesome-icon",{staticClass:"editBtn",attrs:{icon:"fa-solid fa-pen"}})],1),i("button",{attrs:{type:"button"},on:{click:function(i){return t.deleItem(e,a)}}},[i("font-awesome-icon",{staticClass:"editBtn",attrs:{icon:"fa-solid fa-trash"}})],1)])]),i("p",{staticClass:"date"},[t._v(t._s(n.date))])])})),0)])})),0)])]),i("div",{staticClass:"contentBottom",class:{overflowHidden:!t.isCalc}},[!1===t.isCalc?i("button",{staticClass:"lgBtn",attrs:{type:"button"},on:{click:function(e){t.isCalc=!0}}},[t._v("結算")]):i("button",{staticClass:"lgBtn",attrs:{type:"button"},on:{click:function(e){t.isCalc=!1}}},[t._v("關閉 "),i("font-awesome-icon",{attrs:{icon:"fa-solid fa-xmark"}})],1),i("div",{staticClass:"calcBlock",class:{hiddenCalcBlock:!t.isCalc}},[i("div",{staticClass:"calcTitle d-flex align-item-center justify-content-between"},[i("h3",[t._v("平均每人花費")]),i("p",[t._v("$"+t._s(t.perAveragePrice))])]),i("ul",t._l(t.groupData.groupList,(function(e){return i("li",{key:e.id,staticClass:"d-flex align-item-center justify-content-between"},[i("h4",[t._v(t._s(e.name))]),i("p",{class:{pay:e.totalPrice<t.perAveragePrice}},[t._v(t._s(t.calPay(e.totalPrice)))])])})),0)])]),i("div",{staticClass:"editBlock editMember",class:{show:t.isEditMember}},[i("div",{staticClass:"blockHead d-flex justify-content-between align-item-center"},[i("h3",[t._v("編輯群組")]),i("button",{staticClass:"editBtn",attrs:{type:"button"},on:{click:function(e){t.isEditMember=!1}}},[i("font-awesome-icon",{attrs:{icon:"fa-solid fa-xmark",size:"2x"}})],1)]),i("div",{staticClass:"blockMain"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.memberTemp.groupName,expression:"memberTemp.groupName"}],ref:"focusMember",attrs:{type:"text",placeholder:"群組名稱"},domProps:{value:t.memberTemp.groupName},on:{input:function(e){e.target.composing||t.$set(t.memberTemp,"groupName",e.target.value)}}}),i("ul",t._l(t.memberTemp.memberList,(function(e){return i("li",{key:e.id,staticClass:"d-flex align-item-center justify-content-between"},[i("label",{attrs:{for:e.id}},[t._v("成員")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"i.name"}],attrs:{id:e.id,type:"text"},domProps:{value:e.name},on:{input:function(i){i.target.composing||t.$set(e,"name",i.target.value)}}}),i("button",{staticClass:"editBtn",attrs:{type:"button"},on:{click:function(i){return t.deleMember(e)}}},[i("font-awesome-icon",{attrs:{icon:"fa-solid fa-minus"}})],1)])})),0)]),i("div",{staticClass:"blockBottom"},[i("button",{staticClass:"circleBtn addNewBtn",attrs:{type:"button"},on:{click:t.addTempMember}},[i("font-awesome-icon",{attrs:{icon:"fa-solid fa-plus"}})],1),i("button",{staticClass:"lgBtn",attrs:{type:"button"},on:{click:function(e){return t.doneEditMember(t.memberTemp)}}},[t._v("編輯完成")])])]),i("div",{staticClass:"editBlock editItem",class:{show:t.isAdd}},[i("div",{staticClass:"blockHead d-flex justify-content-between align-item-center"},[this.itemTemp.isEdit?i("h3",[t._v("編輯項目")]):i("h3",[t._v("新增項目")]),i("button",{staticClass:"editBtn",attrs:{type:"button"},on:{click:t.closeAddItem}},[i("font-awesome-icon",{attrs:{icon:"fa-solid fa-xmark",size:"2x"}})],1)]),i("div",{staticClass:"blockMain"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.itemTemp.content,expression:"itemTemp.content"}],ref:"focusItem",attrs:{type:"text",placeholder:"項目名稱"},domProps:{value:t.itemTemp.content},on:{input:function(e){e.target.composing||t.$set(t.itemTemp,"content",e.target.value)}}}),this.itemTemp.isEdit?i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.itemTemp.price,expression:"itemTemp.price",modifiers:{number:!0}}],attrs:{type:"number",placeholder:"金額"},domProps:{value:t.itemTemp.price},on:{input:function(e){e.target.composing||t.$set(t.itemTemp,"price",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}):i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.itemTemp.price,expression:"itemTemp.price",modifiers:{number:!0}}],attrs:{type:"number",placeholder:"金額"},domProps:{value:t.itemTemp.price},on:{focus:function(e){t.itemTemp.price=t.focusPrice(t.itemTemp.price)},input:function(e){e.target.composing||t.$set(t.itemTemp,"price",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),i("vc-date-picker",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.inputValue,a=e.inputEvents;return[i("input",t._g({staticClass:"bg-white border px-2 py-1 rounded",domProps:{value:n}},a))]}}]),model:{value:t.itemTemp.date,callback:function(e){t.$set(t.itemTemp,"date",e)},expression:"itemTemp.date"}}),i("select",{directives:[{name:"model",rawName:"v-model",value:t.itemTemp.name,expression:"itemTemp.name"}],staticClass:"selectHeight",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.itemTemp,"name",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"",disabled:""}},[t._v("誰先付的")]),t._l(t.members,(function(e,n){return i("option",{key:n,domProps:{value:e}},[t._v(t._s(e))])}))],2)],1),i("div",{staticClass:"blockBottom"},[this.itemTemp.isEdit?i("button",{staticClass:"lgBtn",attrs:{type:"button"},on:{click:function(e){return t.doneEditItem(t.itemTemp)}}},[t._v("編輯完成")]):i("button",{staticClass:"lgBtn",attrs:{type:"button"},on:{click:function(e){return t.addNewItem(t.itemTemp)}}},[t._v("新增")])])])])},a=[],s=(i("e9c4"),i("c740"),i("d81d"),i("d3b7"),i("159b"),i("b0c0"),i("99af"),i("a434"),i("4e82"),{name:"Group1",data:function(){return{homeData:null,groupData:{groupName:"",groupList:[]},isAdd:!1,isEditMember:!1,isCalc:!1,itemTemp:{name:"",content:"",price:0,date:new Date},memberTemp:{groupName:"",memberList:[],deleMember:[]}}},methods:{saveStorage:function(){var t=JSON.stringify(this.groupData);localStorage.setItem("group".concat(this.$route.params.id),t)},getStorage:function(){var t=JSON.parse(window.localStorage.getItem("group".concat(this.$route.params.id)));t?(this.groupData=t,this.homeData=JSON.parse(window.localStorage.getItem("HomeData"))):this.createData()},createData:function(){var t=this,e=JSON.parse(window.localStorage.getItem("HomeData"));this.homeData=e;var i=e.findIndex((function(e){return e.id===t.$route.params.id})),n=e[i].member.map((function(t,e){return{id:e,name:t,list:[],isHidden:!1,totalPrice:0}}));this.groupData={groupName:e[i].groupName,groupList:n},this.saveStorage()},deleAllItem:function(){var t=this,e=this.groupData.groupList.every((function(t){return 0===t.list.length}));e||(this.$swal.fire({title:"確定要刪除全部資料嗎?",showCancelButton:!0,confirmButtonText:"刪除"}).then((function(e){e.isConfirmed&&(t.groupData.groupList.forEach((function(t){t.list=[]})),t.$swal.fire({title:"刪除成功",showConfirmButton:!1,timer:1e3}),t.saveStorage())})),this.isCalc=!1)},openAddItem:function(){var t=this;this.isAdd||(this.isAdd=!0,setTimeout((function(){t.$refs.focusItem.focus()}),100))},closeAddItem:function(){this.isAdd=!1,this.itemTemp={name:"",content:"",price:0,date:new Date}},addNewItem:function(t){if(t.content)if("number"===typeof t.price)if(t.name){var e=this.groupData.groupList.findIndex((function(e){return e.name===t.name}));this.groupData.groupList[e].isHidden=!1,this.groupData.groupList[e].list.push({id:Date.now(),name:t.name,content:t.content,price:+t.price||0,date:"".concat(t.date.getFullYear(),"/").concat(t.date.getMonth()+1,"/").concat(t.date.getDate()),orignDate:t.date}),this.$swal.fire({title:"新增成功",showConfirmButton:!1,timer:1e3}),this.isCalc=!1,this.closeAddItem(),this.saveStorage()}else this.$swal.fire({title:"請選擇支付對象!",showConfirmButton:!1,timer:1e3});else this.$swal.fire({title:"請輸入正確金額!",showConfirmButton:!1,timer:1e3});else this.$swal.fire({title:"請輸入項目名稱!",showConfirmButton:!1,timer:1e3})},deleItem:function(t,e){var i=this;this.$swal.fire({title:"確定要刪除嗎?",showCancelButton:!0,confirmButtonText:"刪除"}).then((function(n){n.isConfirmed&&(t.list.splice(e,1),i.$swal.fire({title:"刪除成功",showConfirmButton:!1,timer:1e3}),i.isCalc=!1,i.saveStorage())}))},openEditItem:function(t){var e=this;this.isAdd||(this.isAdd=!this.isAdd,this.itemTemp={id:t.id,currentName:t.name,name:t.name,content:t.content,price:+t.price,date:t.orignDate,isEdit:!0},setTimeout((function(){e.$refs.focusItem.focus()}),100))},doneEditItem:function(t){var e=this.groupData.groupList.findIndex((function(e){return e.name===t.currentName})),i=this.groupData.groupList[e].list.findIndex((function(e){return e.id===t.id}));if(t.name===t.currentName){var n=this.groupData.groupList[e].list[i];n.content=t.content,n.price=+t.price||0,n.date="".concat(t.date.getFullYear(),"/").concat(t.date.getMonth()+1,"/").concat(t.date.getDate()),this.groupData.groupList[e].isHidden=!1}else{this.groupData.groupList[e].list.splice(i,1);var a=this.groupData.groupList.findIndex((function(e){return e.name===t.name}));this.groupData.groupList[a].list.push({id:t.id,name:t.name,content:t.content,price:+t.price||0,date:"".concat(t.date.getFullYear(),"/").concat(t.date.getMonth()+1,"/").concat(t.date.getDate()),orignDate:t.date}),this.groupData.groupList[a].isHidden=!1}this.$swal.fire({title:"編輯完成",showConfirmButton:!1,timer:1e3}),this.isCalc=!1,this.closeAddItem(),this.saveStorage()},openEditMember:function(){var t=this;this.isEditMember||(this.isEditMember=!0,this.memberTemp.groupName=this.groupData.groupName,this.memberTemp.memberList=JSON.parse(JSON.stringify(this.groupData.groupList)),setTimeout((function(){t.$refs.focusMember.focus()}),100))},addTempMember:function(){this.memberTemp.memberList.length>=8?this.$swal.fire("最多八名成員"):this.memberTemp.memberList.push({id:Date.now(),name:"",list:[],isHidden:!1,totalPrice:0})},deleMember:function(t){var e=this;this.memberTemp.memberList.length<=2?this.$swal.fire("最少兩名成員"):this.$swal.fire({title:"確定要刪除?",text:"該成員的項目也會同時刪除",icon:"warning",showCancelButton:!0,confirmButtonText:"確定刪除",cancelButtonText:"取消"}).then((function(i){if(i.isConfirmed){e.memberTemp.deleMember.push(t);var n=e.memberTemp.memberList.findIndex((function(e){return e.id===t.id}));e.memberTemp.memberList.splice(n,1)}}))},doneEditMember:function(t){var e=this;if(t.groupName)if(t.groupName.length>10)this.$swal.fire({title:"名稱不可超過10個字!",showConfirmButton:!1,timer:1e3});else{this.groupData.groupName=t.groupName;var i=t.memberList.every((function(t){return""!==t.name}));if(i){var n=t.memberList.map((function(t){return t.name}));n=n.concat().sort();for(var a=0;a<n.length;a++)if(n[a]===n[a+1])return void this.$swal.fire({title:"使用者名稱重複!",showConfirmButton:!1,timer:1e3});this.groupData.groupList=JSON.parse(JSON.stringify(t.memberList)),this.homeData.map((function(t){return+t.id===+e.$route.params.id&&(t.member=e.memberTemp.memberList.map((function(t){return t.name})),t.groupName=e.memberTemp.groupName),t})),this.$swal.fire({title:"編輯完成",showConfirmButton:!1,timer:1e3}),window.localStorage.setItem("HomeData",JSON.stringify(this.homeData)),this.isEditMember=!1,this.saveStorage()}else this.$swal.fire({title:"請輸入使用者名稱!",showConfirmButton:!1,timer:1e3})}else this.$swal.fire({title:"請輸入群組名稱!",showConfirmButton:!1,timer:1e3})}},mounted:function(){this.getStorage(),window.scrollTo(0,0)},computed:{perTotalPrice:function(){return function(t){return t.totalPrice=t.list.reduce((function(t,e){return t+e.price}),0),t.totalPrice}},calTotalPrice:function(){var t=this.groupData.groupList.map((function(t){return t.totalPrice}));return t.reduce((function(t,e){return t+e}),0)},perAveragePrice:function(){return Math.round(this.calTotalPrice/this.groupData.groupList.length)},calPay:function(){var t=this;return function(e){return e>t.perAveragePrice?"應收 $".concat(e-t.perAveragePrice):e<=t.perAveragePrice?"應付 $".concat(t.perAveragePrice-e):void 0}},members:function(){return this.groupData.groupList.map((function(t){return t.name}))},focusPrice:function(){return function(t){return 0===t?"":t}}}}),o=s,r=i("2877"),c=Object(r["a"])(o,n,a,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0d09e9.e8b7f465.js.map